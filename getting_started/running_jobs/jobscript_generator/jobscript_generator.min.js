"use strict";var jobscript={};!function(a){a.__split_time=function(a){var b=0,c=0,d=0;""!=a&&null!=a||(a=":");var e=a.split(":");return 3!=e.length?null:(b=e[0],c=e[1],d=e[2],{hours:b,minutes:c,seconds:d})},a.__compute_time_from_string=function(b){var c=a.__split_time(b);return null!=c?Number(60*c.hours)+Number(c.minutes):null},a.__compute_time=function(a,b){return Number(60*a)+Number(b)},a.__compose_time=function(b,c){return null!=b&&"undefined"!=b&&""!=b||(b=0),null!=c&&"undefined"!=c&&""!=c||(c=0),a.__pad_interger(b)+":"+a.__pad_interger(c)+":00"},a.__pad_interger=function(a){return Number(a)<10&&"00"!=a&&"00"!=a&&"01"!=a&&"02"!=a&&"03"!=a&&"04"!=a&&"05"!=a&&"06"!=a&&"07"!=a&&"08"!=a&&"09"!=a?"0"+a:a},a.__unpad_interger=function(a){return Number(a)<10&&("00"==a||"00"==a||"01"==a||"02"==a||"03"==a||"04"==a||"05"==a||"06"==a||"07"==a||"08"==a||"09"==a)?a[1]:a},a.__convert_time_string=function(b){var c=a.__split_time(b);return null!=c?a.__pad_interger(c.hours)+":"+a.__pad_interger(c.minutes)+":00":null},a.__is_element_hidden=function(a){return $(a).is(":visible")},a.__get_GUI_PropertyValue=function(b){var c=$(b),d=c.val(),e=a.__is_element_hidden(c);return 0==e?null:d},a.__populate_initial_partition_text=function(a,b,c){$("#numberTasksPerCoreText").text("Specify the number of tasks per core. Values greater than one turn hyperthreading on."),$("#numberOfTasksPerNodeText").text("Specify the number of tasks per node. Defines the number of MPI ranks per node. The maximum value depends on the number of cpus per task."),$("#numberOfCpusPerTaskText").text("Specify the number of cpus per task. Defines the number of OpenMP threads per MPI rank. The maximum value depends on the number of tasks per node."),null!=a&&""!=a&&$("#numberTasksPerCoreText").append(" Maximum value: "+a+"."),null!=b&&""!=b&&$("#numberOfTasksPerNodeText").append(" Current maximum: "+b+"."),null!=c&&""!=c&&$("#numberOfCpusPerTaskText").append(" Current maximum: "+c+".")},a.__populate_initial_node_text=function(a){$("#numberOfNodesText").text("Specify the number of nodes."),null!=a&&""!=a&&$("#numberOfNodesText").append(" Maximum value: "+a+".")},a.__bindPrototypeMethods=function(a,b){a.prototype=Object.create(b.prototype)},a.Partition=function(){this.name="partition",this.typeName=a.Partition,this.Partition={normal:"--partition="},this.list_of_partitions=["normal"],this.directive="#SBATCH ",this.NumNodesDirective="--nodes=",this.NumGpusPerNodesDirective="--ntasks-per-node=",this.NumTasksPerNodesDirective="--ntasks-per-node=",this.NumCpusPerTaskDirective="--cpus-per-task=",this.NumTasksPerCoreDirective="--ntasks-per-core=",this.MemoryDirective="--mem=",this.EMailDirective="--mail-user=",this.NameDirective="--job-name=",this.ExclusiveDirective="--exclusive",this.WallTimeDirective="--time=",this.allow_node_sharing={},this.allow_hyperthreading={},this.partition_website={},this.pre_commands={},this.default_executable={},this.has_constraints={},this.env_variables_ntasks={},this.max_num_nodes={normal:1},this.max_num_gpus={normal:1},this.max_num_tasks_per_node={normal:1},this.max_num_cpus_per_tasks={normal:1},this.max_num_tasks_per_core={normal:1},this.max_memory_per_node={normal:120},this.max_wall_time={normal:"00:00:00"},this.default_wall_time={normal:"00:00:00"}},a.Partition.prototype.getValue=function(a){var b=a[this.name];return"undefined"==b||null==b||""==b?null:b},a.Partition.prototype.hasHyperThreading=function(){var b=this.getValue(this.max_num_tasks_per_core),c=a.__get_GUI_PropertyValue("#numberTasksPerCore");return null==c&&(c=1),b=null!=b&&Number(b)>Number(1)&&Number(c)>Number(1)},a.Partition.prototype.allowHyperThreading=function(){var a=this.getValue(this.max_num_tasks_per_core);return a=null!=a},a.Partition.prototype.getMaxNumberOfThreads=function(){var a=this.hasHyperThreading(),b=this.getValue(this.max_num_tasks_per_node),c=this.getValue(this.max_num_tasks_per_core);return null==b||""==b?b=1:1==a&&(null!=c&&""!=c||(c=1),b*=c),b},a.Partition.prototype.setNumTasksPerNodeAndNumCpusPerNodeValues=function(a){var b=this.getValue(this.max_num_tasks_per_node);null!=b?this.hasHyperThreading()&&(b*=a):b=1,$("#numberOfTasksPerNode").attr({min:1}),$("#numberOfTasksPerNode").attr({max:b}),$("#numberOfTasksPerNode").val(b);var c=this.getValue(this.max_num_cpus_per_tasks);c=null!=c?Math.floor(this.getMaxNumberOfThreads()/b):1,$("#numberOfCpusPerTask").attr({min:1}),$("#numberOfCpusPerTask").attr({max:c}),$("#numberOfCpusPerTask").val(c)},a.Partition.prototype.updateNodesInformation=function(){var c=this.getValue(this.max_num_tasks_per_core),d=a.__get_GUI_PropertyValue("#numberTasksPerCore");null!=c?0==this.allowHyperThreading()&&(c=1):c=1;var e=$("#numberTasksPerCore");e.attr({min:1}),e.attr({max:c}),""!=d&&"undefined"!=d||(d=1),e.val(d),this.setNumTasksPerNodeAndNumCpusPerNodeValues(d);var f=this.getValue(this.max_num_nodes),g=$("#numberOfNodes");g.attr({min:1}),g.attr({max:f}),Number(g.val())>Number(g.attr("max"))?g.val(g.attr("max")):Number(g.val())<Number(g.attr("min"))&&g.val(g.attr("min"))},a.Partition.prototype.updateTimeGUI=function(){var b=this.getValue(this.default_wall_time);if(null==b)$("#hours").val("0"),$("#minutes").val("0");else{var c=a.__split_time(b);$("#hours").val(a.__unpad_interger(c.hours)),$("#minutes").val(a.__unpad_interger(c.minutes))}},a.Partition.prototype.hideGUIDataField=function(a,b){var c=this.getValue(b);null!=c?$(a).show():$(a).hide()},a.Partition.prototype.hideGUIBooleanField=function(a,b,c){var d=this.getValue(b);null!=d&&d==c?$(a).show():$(a).hide()},a.Partition.prototype.updatePartitionsFields=function(){this.hideGUIBooleanField("#ExclusiveNodeGroup",this.allow_node_sharing,!0),this.hideGUIDataField("#numberOfNodesGroup",this.max_num_nodes),this.hideGUIDataField("#numberTasksPerCoreGroup",this.max_num_tasks_per_core),this.hideGUIDataField("#numberOfTasksPerNodeGroup",this.max_num_tasks_per_node),this.hideGUIDataField("#numberOfCpusPerTaskGroup",this.max_num_cpus_per_tasks),this.hideGUIDataField("#bigMemoryGroup",this.max_memory_per_node);var a=this.getValue(this.default_executable);null==a?$("#executableGroup").show():($("#executableGroup").hide(),$("#executable").val(""))},a.Partition.prototype.updateGUI=function(){for(var c=this,d=0;d<c.list_of_partitions.length;d++)$("#selectPartition").append("<option>"+this.list_of_partitions[d]+"</option>");$("#selectPartition").change(function(){b=new c.typeName($(this).val()),b.updatePartitionsFields(),b.updateTimeGUI(),b.updateNodesInformation(),a.print_jobscript(),a.__populate_initial_partition_text(null,null,null),a.__populate_initial_node_text(null)}),b.updatePartitionsFields(),b.updateTimeGUI(),b.updateNodesInformation(),a.print_jobscript(),a.__populate_initial_partition_text(null,null,null),a.__populate_initial_node_text(null)},a.Partition.prototype.printPartition=function(){var a=this.getValue(this.Partition);return null==a?"":this.directive+a+this.name+"\n"},a.Partition.prototype.printConstraints=function(){var a=this.getValue(this.has_constraints);return null==a?"":this.directive+a+"\n"},a.Partition.prototype.printExclusive=function(){var a=$("#ExclusiveNode").prop("checked"),b=this.getValue(this.allow_node_sharing);return null!=b&&1==a?this.directive+this.ExclusiveDirective+"\n":""},a.Partition.prototype.printNumNodes=function(){var b=a.__get_GUI_PropertyValue("#numberOfNodes");return null!=b?(""!=b&&"undefined"!=b||(b=1),this.directive+this.NumNodesDirective+b+"\n"):""},a.Partition.prototype.printNumTasksPerCore=function(){var b=a.__get_GUI_PropertyValue("#numberTasksPerCore");return null!=b?(""!=b&&"undefined"!=b||(b=1),this.directive+this.NumTasksPerCoreDirective+b+"\n"):""},a.Partition.prototype.printNumTasksPerNodes=function(){var b=a.__get_GUI_PropertyValue("#numberOfTasksPerNode");return null!=b?(""!=b&&"undefined"!=b||(b=1),this.directive+this.NumTasksPerNodesDirective+b+"\n"):""},a.Partition.prototype.printNumCpusPerTask=function(){var b=a.__get_GUI_PropertyValue("#numberOfCpusPerTask");return null!=b?(""!=b&&"undefined"!=b||(b=1),this.directive+this.NumCpusPerTaskDirective+b+"\n"):""},a.Partition.prototype.printEnvironmentVariables=function(){var b="";b+="export OMP_NUM_THREADS=$SLURM_CPUS_PER_TASK\n";var c=this.getValue(this.env_variables_ntasks),d=a.__get_GUI_PropertyValue("#numberOfTasksPerNode");return null!=c&&Number(d)>1&&(b+=c+"\n"),b},a.Partition.prototype.getWallTime=function(){var b=$("#hours").val(),c=$("#minutes").val(),d=a.__compute_time(b,c),e=a.__compose_time(b,c),f=this.getValue(this.max_wall_time),g=a.__convert_time_string(f),h=a.__compute_time_from_string(f);if(null!=f&&Number(d)>Number(h))d=h,e=g;else if(null==f)return"";return this.directive+this.WallTimeDirective+e+"\n"},a.Partition.prototype.printMemPerNode=function(){var a=$("#bigMemory").prop("checked"),b=this.getValue(this.max_memory_per_node);if(null!=b&&1==a)a=b;else if(null==b||0==a)return"";return this.directive+this.MemoryDirective+a+"GB\n"},a.Partition.prototype.printExecutable=function(){var a=$("#executable").val(),b=this.getValue(this.default_executable);return null==b||""!=a&&"undefined"!=a&&null!=a?""!=a&&"undefined"!=a&&null!=a||(a="./executable.x"):a=b,"srun "+a},a.Partition.prototype.printPreCommand=function(){var a=this.getValue(this.pre_commands);return null!=a&&""!=a&&"undefined"!=a?a+"\n":""},a.Partition.prototype.printPartitionWebSite=function(a){var b=this.getValue(this.partition_website);null!=b&&(a.innerHTML="For more information about this queue, please refer to this <a target='_blank' href='"+b+"'>website</a>.")},a.Partition.prototype.printTimeWarningMessage=function(b){var c=$("#hours").val(),d=$("#minutes").val();a.__compose_time(c,d);"00:00:00"==timeString&&(b.innerHTML+="<p>You have selected job a wall time of 00:00:00.</p>")},a.Partition.prototype.printJobScriptMessage=function(b){var c=this.getMaxNumberOfThreads(),d=1,e=[],f=a.__get_GUI_PropertyValue("#numberTasksPerCore"),g=a.__get_GUI_PropertyValue("#numberOfTasksPerNode"),h=a.__get_GUI_PropertyValue("#numberOfCpusPerTask");""==f&&(f=1),""==g&&(g=1),""==h&&(h=1);var i=this.hasHyperThreading();null!=f&&e.push("tasks per core"),null!=g&&(d*=g,e.push("tasks per node")),null!=h&&(d*=h,e.push("cpus per task"));var j=!1,k=!1;Number(d)<=0?(j=!1,k=!0):Number(d)<Number(c)&&(j=!0,k=!1),b.innerHTML="";var l=$("#hours").val(),m=$("#minutes").val(),n=a.__compose_time(l,m),o=!1;"00:00:00"==n&&(o=!0);var p="<p>You have selected a wall time of 00:00:00.</p>";if(j){var q=$("#jobscriptalert");q.show(),1==q.hasClass("alert-success")&&q.removeClass("alert-success"),q.addClass("alert-warning"),b.innerHTML+="<h4>Warning</h4>",b.innerHTML+="You have selected a ",Number(e.length)>1?b.innerHTML+="combination of ":b.innerHTML+="number for ";var t,r=0,s=e.length;for(t in e)r=Number(r)+1,b.innerHTML+="<b>"+e[t]+"</b>",r==s-1?b.innerHTML+=" and ":r!=s&&(b.innerHTML+=", ");b.innerHTML+=" that cannot achieve the maximum potential of the node.",b.innerHTML+=" <p>The maximum parallel processes is <b>"+c+"</b> but you have selected only <b>"+d+"</b>.</p>",i?b.innerHTML+=" <p>Note: <b>HyperThreading</b> is <b>on</b>.</p>":b.innerHTML+=" <p>Note: <b>HyperThreading</b> is <b>off</b>.</p>",o&&(b.innerHTML+=p)}else if(1!=d){var q=$("#jobscriptalert");q.show(),o?(1==q.hasClass("alert-success")&&q.removeClass("alert-success"),q.addClass("alert-warning"),b.innerHTML+="<h4>Warning</h4>"):(1==q.hasClass("alert-warning")&&q.removeClass("alert-warning"),q.addClass("alert-success"),b.innerHTML+="<h4>Success</h4>"),b.innerHTML+="<p>For a hybrid MPI + OpenMP program you have selected: </p>",b.innerHTML+="<p><b>"+g+"</b> MPI rank(s) and <b>"+h+"</b> OpenMP thread(s) </p>",i?b.innerHTML+=" <p>Note: <b>HyperThreading</b> is <b>on</b>.</p>":b.innerHTML+=" <p>Note: <b>HyperThreading</b> is <b>off</b>.</p>",o&&(b.innerHTML+=p)}else if(o){var q=$("#jobscriptalert");q.show(),1==q.hasClass("alert-success")&&q.removeClass("alert-success"),q.addClass("alert-warning"),b.innerHTML+="<h4>Warning</h4>",b.innerHTML+=p}else{var q=$("#jobscriptalert");q.hide()}},a.Partition.prototype.printJobScript=function(a){a.innerHTML="#!/bin/bash -l\n";var b=$("#jobName").val(),c=$("#jobName").prop("placeholder");"undefined"!=b&&null!=b&&""!=b?a.innerHTML+=this.directive+this.NameDirective+b+"\n":"undefined"!=c&&null!=c&&""!=c&&(a.innerHTML+=this.directive+this.NameDirective+c+"\n");var d=$("#emailAddress").val();"undefined"!=d&&null!=d&&""!=d&&(a.innerHTML+=this.directive+this.EMailDirective+d+"\n"),a.innerHTML+=this.getWallTime(),a.innerHTML+=this.printNumNodes(),a.innerHTML+=this.printNumTasksPerCore(),a.innerHTML+=this.printNumTasksPerNodes(),a.innerHTML+=this.printNumCpusPerTask(),a.innerHTML+=this.printMemPerNode(),a.innerHTML+=this.printPartition(),a.innerHTML+=this.printConstraints(),a.innerHTML+=this.printExclusive(),a.innerHTML+="\n",a.innerHTML+=this.printEnvironmentVariables(),a.innerHTML+="\n",a.innerHTML+=this.printPreCommand(),a.innerHTML+=this.printExecutable()},a.Partition.prototype.print=function(a,b,c){this.printPartitionWebSite(b),this.printJobScriptMessage(c),this.printJobScript(a)},a.DaintGPUPartition=function(b){a.Partition.call(this),this.name=b,this.typeName=a.DaintGPUPartition,this.Partition={normal:"--partition=",low:"--partition=",high:"--partition=",xfer:"--partition=",prepost:"--partition=",debug:"--partition="},this.max_wall_time={normal:"24:00:00",low:"06:00:00",high:"24:00:00",xfer:"24:00:00",prepost:"00:30:00",debug:"00:30:00"},this.default_wall_time={normal:"01:00:00",low:"01:00:00",high:"01:00:00",xfer:"01:00:00",prepost:"00:30:00",debug:"00:30:00"},this.partition_website={normal:"http://eth-cscs.github.io/getting_started/running_jobs/piz_daint",low:"http://eth-cscs.github.io/getting_started/running_jobs/piz_daint",high:"http://eth-cscs.github.io/getting_started/running_jobs/piz_daint",xfer:"http://user.cscs.ch/storage/data_transfer/internal_transfer/index.html",prepost:"MISSING WEBSITE",debug:"MISSING WEBSITE"},this.env_variables_ntasks={normal:"export CRAY_CUDA_MPS=1",low:"export CRAY_CUDA_MPS=1",high:"export CRAY_CUDA_MPS=1",debug:"export CRAY_CUDA_MPS=1"},this.list_of_partitions=["normal","low","high","xfer","prepost","debug"],this.allow_node_sharing={},this.pre_commands={xfer:"module unload xalt"},this.default_executable={xfer:"rsync -av $1 $2\nif [ -n '$3' ]; then\n    sbatch --dependency=afterok:$SLURM_JOB_ID $3\nfi\n"},this.has_constraints={normal:"--constraint=gpu",low:"--constraint=gpu",high:"--constraint=gpu",debug:"--constraint=gpu"},this.max_num_nodes={normal:2400,low:2400,high:2400,debug:4},this.max_num_gpus={normal:1,low:1,high:1,debug:1},this.max_num_tasks_per_node={normal:12,low:12,high:12,debug:12},this.max_num_cpus_per_tasks={normal:12,low:12,high:12,debug:12},this.max_num_tasks_per_core={normal:2,low:2,high:2,debug:2},this.max_memory_per_node={}},a.__bindPrototypeMethods(a.DaintGPUPartition,a.Partition),a.DaintMCPartition=function(b){a.DaintGPUPartition.call(this),this.name=b,this.typeName=a.DaintMCPartition,this.has_constraints={normal:"--constraint=mc",low:"--constraint=mc",high:"--constraint=mc",debug:"--constraint=mc"},this.max_num_tasks_per_node={normal:36,low:36,high:36,debug:36},this.max_num_cpus_per_tasks={normal:36,low:36,high:36,debug:36},this.max_num_gpus={},this.env_variables_ntasks={},this.max_memory_per_node={normal:120}},a.__bindPrototypeMethods(a.DaintMCPartition,a.DaintGPUPartition),a.MonchPartition=function(b){a.Partition.call(this),this.name=b,this.typeName=a.MonchPartition,this.Partition={dphys_compute:"--partition=",dphys_largemem:"--partition=",dphys_largemem_wk:"--partition=",dphys_hugemem:"--partition=",dphys_hugemem_wk:"--partition=",fichtner_compute:"--partition=",parrinello_compute:"--partition=",spaldin_compute:"--partition=",express_compute:"--partition="},this.env_variables_ntasks={},this.list_of_partitions=["dphys_compute","dphys_largemem","dphys_largemem_wk","dphys_hugemem","dphys_hugemem_wk","fichtner_compute","parrinello_compute","spaldin_compute","express_compute"],this.max_wall_time={dphys_compute:"24:00:00",dphys_largemem:"24:00:00",dphys_largemem_wk:"168:00:00",dphys_hugemem:"24:00:00",dphys_hugemem_wk:"168:00:00",fichtner_compute:"24:00:00",parrinello_compute:"24:00:00",spaldin_compute:"24:00:00",express_compute:"02:00:00"},this.default_wall_time={dphys_compute:"01:00:00",dphys_largemem:"01:00:00",dphys_largemem_wk:"01:00:00",dphys_hugemem:"01:00:00",dphys_hugemem_wk:"01:00:00",fichtner_compute:"01:00:00",parrinello_compute:"01:00:00",spaldin_compute:"01:00:00",express_compute:"01:00:00"},this.partition_website={dphys_compute:"http://eth-cscs.github.io/getting_started/running_jobs/monch",dphys_largemem:"http://eth-cscs.github.io/getting_started/running_jobs/monch",dphys_largemem_wk:"http://eth-cscs.github.io/getting_started/running_jobs/monch",dphys_hugemem:"http://eth-cscs.github.io/getting_started/running_jobs/monch",dphys_hugemem_wk:"http://eth-cscs.github.io/getting_started/running_jobs/monch",fichtner_compute:"http://eth-cscs.github.io/getting_started/running_jobs/monch",parrinello_compute:"http://eth-cscs.github.io/getting_started/running_jobs/monch",spaldin_compute:"http://eth-cscs.github.io/getting_started/running_jobs/monch",express_compute:"http://eth-cscs.github.io/getting_started/running_jobs/monch"},this.max_num_nodes={dphys_compute:"310",dphys_largemem:"40",dphys_largemem_wk:"12",dphys_hugemem:"24",dphys_hugemem_wk:"8",fichtner_compute:"310",parrinello_compute:"310",spaldin_compute:"310",express_compute:"2"},this.max_num_gpus={},this.max_num_tasks_per_node={dphys_compute:"20",dphys_largemem:"20",dphys_largemem_wk:"20",dphys_hugemem:"20",dphys_hugemem_wk:"20",fichtner_compute:"20",parrinello_compute:"20",spaldin_compute:"20",express_compute:"20"},this.max_num_cpus_per_tasks={dphys_compute:"20",dphys_largemem:"20",dphys_largemem_wk:"20",dphys_hugemem:"20",dphys_hugemem_wk:"20",fichtner_compute:"20",parrinello_compute:"20",spaldin_compute:"20",express_compute:"20"},this.max_num_tasks_per_core={dphys_compute:"2",dphys_largemem:"2",dphys_largemem_wk:"2",dphys_hugemem:"2",dphys_hugemem_wk:"2",fichtner_compute:"2",parrinello_compute:"2",spaldin_compute:"2",express_compute:"2"}},a.__bindPrototypeMethods(a.MonchPartition,a.Partition),a.LeonePartition=function(b){a.Partition.call(this),this.name=b,this.typeName=a.LeonePartition,this.Partition={normal:"--partition=",longrun:"--partition=",debug:"--partition="},this.list_of_partitions=["normal","longrun","debug"],this.env_variables_ntasks={},this.max_wall_time={normal:"24:00:00",longrun:"168:00:00",debug:"00:30:00"},this.default_wall_time={normal:"01:00:00",longrun:"01:00:00",debug:"00:30:00"},this.partition_website={normal:"http://eth-cscs.github.io/getting_started/running_jobs/monte_leone",longrun:"http://eth-cscs.github.io/getting_started/running_jobs/monte_leone",debug:"http://eth-cscs.github.io/getting_started/running_jobs/monte_leone"},this.max_num_nodes={normal:"2",longrun:"2",debug:"1"},this.max_num_gpus={},this.max_num_tasks_per_node={normal:"16",longrun:"16",debug:"16"},this.max_num_cpus_per_tasks={normal:"16",longrun:"16",debug:"16"},this.max_num_tasks_per_core={normal:"2",longrun:"2",debug:"2"},this.has_constraints={}},a.__bindPrototypeMethods(a.LeonePartition,a.Partition),a.TavePartition=function(b){a.Partition.call(this),this.name=b,this.typeName=a.TavePartition,this.Partition={normal:"--partition=",largemem:"--partition="},this.list_of_partitions=["normal","largemem"],this.max_num_tasks_per_core={normal:4,largemem:4}},a.__bindPrototypeMethods(a.TavePartition,a.Partition);var b={};a.__clean_fields=function(){document.getElementById("selectPartition").innerHTML=null,document.getElementById("jobscript").innerHTML=null},a.populate_form=function(){b=new a.DaintGPUPartition("normal"),b.updateGUI(),a.print_jobscript(),$("#selectMachine").change(function(){"Daint Hybrid"==$(this).val()?(a.__clean_fields(),b=new a.DaintGPUPartition("normal"),b.updateGUI()):"Daint MultiCore"==$(this).val()?(a.__clean_fields(),b=new a.DaintMCPartition("normal"),b.updateGUI()):"Monch"==$(this).val()?(a.__clean_fields(),b=new a.MonchPartition("dphys_compute"),b.updateGUI()):"Leone"==$(this).val()?(a.__clean_fields(),b=new a.LeonePartition("normal"),b.updateGUI()):"Tave"==$(this).val()&&(a.__clean_fields(),b=new a.TavePartition("normal"),b.updateGUI())});var c=$("#numberOfNodes");c.change(function(){Number(this.value)>Number(this.max)?this.value=this.max:Number(this.value)<Number(this.min)&&(this.value=this.min),a.__populate_initial_node_text(this.max),a.print_jobscript()}),c.keyup(function(){Number(this.value)>Number(this.max)?this.value=this.max:Number(this.value)<Number(this.min)&&""!=this.value&&(this.value=this.min),a.__populate_initial_node_text(this.max),a.print_jobscript()});var d=$("#numberTasksPerCore");d.change(function(){var c=b.getValue(b.max_num_tasks_per_core);null!=c?0==b.allowHyperThreading()&&(c=1):c=1,Number(this.value)>Number(this.max)?this.value=this.max:Number(this.value)>Number(c)?this.value=c:Number(this.value)<Number(this.min)&&(this.value=this.min),b.setNumTasksPerNodeAndNumCpusPerNodeValues(this.value);var d=$("#numberOfTasksPerNode").attr("max"),e=$("#numberOfCpusPerTask").attr("max");a.__populate_initial_partition_text(this.max,d,e),a.print_jobscript()}),d.keyup(function(){var c=b.getValue(b.max_num_tasks_per_core);null!=c?0==b.allowHyperThreading()&&(c=1):c=1,Number(this.value)>Number(this.max)?this.value=this.max:Number(this.value)>Number(c)?this.value=c:Number(this.value)<=0&&""!=this.value&&(this.value=this.min);var d=this.value;""==d&&(d=1),b.setNumTasksPerNodeAndNumCpusPerNodeValues(d);var e=$("#numberOfTasksPerNode").attr("max"),f=$("#numberOfCpusPerTask").attr("max");a.__populate_initial_partition_text(this.max,e,f),a.print_jobscript()});var e=$("#numberOfTasksPerNode");e.change(function(){var c=b.getMaxNumberOfThreads(),d=$("#numberOfCpusPerTask"),e=d.val();Number(this.value)>Number(this.max)?this.value=this.max:Number(this.value)<Number(this.min)&&(this.value=this.min),null==e&&(e=1);var f=this.value;""==f&&(f=1);var g=Math.floor(Number(c)/Number(e));Number(this.value)>Number(g)&&(this.max=g,this.value=g);var h=Math.floor(Number(c)/Number(f));d.attr({max:h});var i=$("#numberTasksPerCore").attr("max");a.__populate_initial_partition_text(i,g,h),a.print_jobscript()}),e.keyup(function(){var c=b.getMaxNumberOfThreads(),d=$("#numberOfCpusPerTask"),e=d.val();Number(this.value)>Number(this.max)?this.value=this.max:Number(this.value)<=0&&""!=this.value&&(this.value=this.min);var f=this.value;""==f&&(f=1),null==e&&(e=1);var g=Math.floor(Number(c)/Number(e));Number(this.value)>Number(g)&&(this.max=g,this.value=g);var h=Math.floor(Number(c)/Number(f));d.attr({max:h});var i=$("#numberTasksPerCore").attr("max");a.__populate_initial_partition_text(i,g,h),a.print_jobscript()});var f=$("#numberOfCpusPerTask");f.change(function(){var c=b.getMaxNumberOfThreads(),d=$("#numberOfTasksPerNode"),e=d.val();Number(this.value)>Number(this.max)?this.value=this.max:Number(this.value)<Number(this.min)&&(this.value=this.min),null==e&&(e=1);var f=this.value;""==f&&(f=1);var g=Math.floor(Number(c)/Number(e));Number(this.value)>Number(g)&&(this.max=g,this.value=g);var h=Math.floor(Number(c)/Number(f));d.attr({max:h});var i=$("#numberTasksPerCore").attr("max");a.__populate_initial_partition_text(i,h,g),a.print_jobscript()}),f.keyup(function(){var c=b.getMaxNumberOfThreads(),d=$("#numberOfTasksPerNode"),e=d.val();Number(this.value)>Number(this.max)?this.value=this.max:Number(this.value)<=0&&""!=this.value&&(this.value=this.min),null==e&&(e=1);var f=this.value;""==f&&(f=1);var g=Math.floor(Number(c)/Number(e));Number(this.value)>Number(g)&&(this.max=g,this.value=g);var h=Math.floor(Number(c)/Number(f));d.attr({max:h});var i=$("#numberTasksPerCore").attr("max");a.__populate_initial_partition_text(i,h,g),a.print_jobscript()})},a.print_jobscript=function(){document.getElementById("jobscript").innerHTML=null,$("#jobscriptalert").hide(),b.print(document.getElementById("jobscript"),document.getElementById("partitionwebsite"),document.getElementById("jobscriptalert"));try{a.__highlight_code()}catch(a){}return!0},a.validate_hour=function(){var c=$("#hours").val(),d=$("#minutes").val(),e=a.__compute_time(c,d),f=b.getValue(b.max_wall_time),g=a.__compute_time_from_string(f);if(null!=f&&Number(e)>Number(g)){var h=a.__split_time(f);e=a.__compute_time(h.hours,d),Number(e)>Number(g)?($("#hours").attr({max:a.__unpad_interger(h.hours)}),$("#hours").val(a.__unpad_interger(h.hours-1))):($("#hours").attr({max:a.__unpad_interger(h.hours)}),$("#hours").val(a.__unpad_interger(h.hours)))}return!0},a.validate_minutes=function(){var c=$("#hours").val(),d=$("#minutes").val(),e=a.__compute_time(c,d),f=b.getValue(b.max_wall_time),g=a.__compute_time_from_string(f);if(null!=f&&Number(e)>Number(g)){var h=a.__split_time(f);$("#minutes").attr({max:a.__unpad_interger(h.minutes)}),$("#minutes").val(a.__unpad_interger(h.minutes))}return!0}}(jobscript);